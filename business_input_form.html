<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Analysis Input Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .form-container {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .dynamic-list {
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
        }

        .list-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .list-item input {
            flex: 1;
            margin-right: 10px;
            border: none;
            background: transparent;
        }

        .list-item input:focus {
            outline: none;
            box-shadow: none;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .add-btn {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-container {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }

        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .business-type-examples {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸš€ Business Analysis System</h1>
            <p>Get comprehensive business analysis from our AI agents</p>
        </div>

        <div class="form-container">
            <form id="businessForm">
                <div class="form-group">
                    <label for="businessName">Business Name *</label>
                    <input type="text" id="businessName" name="business_name" required placeholder="Enter your business name">
                </div>

                <div class="form-group">
                    <label for="businessType">Business Type *</label>
                    <select id="businessType" name="business_type" required>
                        <option value="">Select business type</option>
                        <option value="coffee_shop">Coffee Shop / Cafe</option>
                        <option value="restaurant">Restaurant</option>
                        <option value="retail_store">Retail Store</option>
                        <option value="tech_startup">Technology Startup</option>
                        <option value="consulting_firm">Consulting Firm</option>
                        <option value="ecommerce">E-commerce</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="healthcare">Healthcare</option>
                        <option value="education">Education</option>
                        <option value="real_estate">Real Estate</option>
                        <option value="fitness">Fitness / Gym</option>
                        <option value="beauty_salon">Beauty Salon</option>
                        <option value="automotive">Automotive</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="business-type-examples">
                        Examples: coffee_shop, restaurant, tech_startup, consulting_firm, ecommerce, etc.
                    </div>
                </div>

                <div class="form-group">
                    <label for="location">Location *</label>
                    <input type="text" id="location" name="location" required placeholder="City, Country">
                </div>

                <div class="form-group">
                    <label for="description">Business Description *</label>
                    <textarea id="description" name="description" required placeholder="Describe your business, products/services, and what makes it unique"></textarea>
                </div>

                <div class="form-group">
                    <label for="targetMarket">Target Market *</label>
                    <textarea id="targetMarket" name="target_market" required placeholder="Describe your target customers (age, income, interests, etc.)"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="industry">Industry</label>
                        <select id="industry" name="industry">
                            <option value="">Select industry</option>
                            <option value="food_beverage">Food & Beverage</option>
                            <option value="technology">Technology</option>
                            <option value="retail">Retail</option>
                            <option value="services">Services</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="education">Education</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="real_estate">Real Estate</option>
                            <option value="finance">Finance</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="businessModel">Business Model</label>
                        <select id="businessModel" name="business_model">
                            <option value="">Select business model</option>
                            <option value="b2c">B2C (Business to Consumer)</option>
                            <option value="b2b">B2B (Business to Business)</option>
                            <option value="marketplace">Marketplace</option>
                            <option value="subscription">Subscription</option>
                            <option value="franchise">Franchise</option>
                            <option value="consulting">Consulting</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="initialInvestment">Initial Investment (USD)</label>
                        <input type="number" id="initialInvestment" name="initial_investment" placeholder="Enter amount in USD">
                    </div>

                    <div class="form-group">
                        <label for="teamSize">Team Size</label>
                        <input type="number" id="teamSize" name="team_size" placeholder="Number of employees">
                    </div>
                </div>

                <div class="form-group">
                    <label for="uniqueValueProposition">Unique Value Proposition</label>
                    <textarea id="uniqueValueProposition" name="unique_value_proposition" placeholder="What makes your business unique? What value do you provide that competitors don't?"></textarea>
                </div>

                <div class="form-group">
                    <label for="marketSize">Market Size</label>
                    <select id="marketSize" name="market_size">
                        <option value="">Select market size</option>
                        <option value="local">Local</option>
                        <option value="regional">Regional</option>
                        <option value="national">National</option>
                        <option value="international">International</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Competitors</label>
                    <div class="dynamic-list" id="competitorsList">
                        <div class="list-item">
                            <input type="text" placeholder="Enter competitor name" class="competitor-input">
                            <button type="button" class="remove-btn" onclick="removeListItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-btn" onclick="addCompetitor()">Add Competitor</button>
                </div>

                <div class="form-group">
                    <label>Growth Goals</label>
                    <div class="dynamic-list" id="growthGoalsList">
                        <div class="list-item">
                            <input type="text" placeholder="Enter growth goal" class="goal-input">
                            <button type="button" class="remove-btn" onclick="removeListItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-btn" onclick="addGrowthGoal()">Add Growth Goal</button>
                </div>

                <div class="form-group">
                    <label>Technology Requirements</label>
                    <div class="dynamic-list" id="techRequirementsList">
                        <div class="list-item">
                            <input type="text" placeholder="Enter technology requirement" class="tech-input">
                            <button type="button" class="remove-btn" onclick="removeListItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-btn" onclick="addTechRequirement()">Add Technology Requirement</button>
                </div>

                <div class="form-group">
                    <label>Regulatory Requirements</label>
                    <div class="dynamic-list" id="regulatoryRequirementsList">
                        <div class="list-item">
                            <input type="text" placeholder="Enter regulatory requirement" class="regulatory-input">
                            <button type="button" class="remove-btn" onclick="removeListItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="add-btn" onclick="addRegulatoryRequirement()">Add Regulatory Requirement</button>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    ðŸš€ Analyze My Business
                </button>
            </form>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing your business with AI agents...</p>
                <p>This may take 2-3 minutes</p>
            </div>

            <div class="result-container" id="resultContainer">
                <h3>Analysis Results</h3>
                <div id="resultContent"></div>
            </div>
        </div>
    </div>

    <script>
        function addCompetitor() {
            addListItem('competitorsList', 'competitor-input', 'Enter competitor name');
        }

        function addGrowthGoal() {
            addListItem('growthGoalsList', 'goal-input', 'Enter growth goal');
        }

        function addTechRequirement() {
            addListItem('techRequirementsList', 'tech-input', 'Enter technology requirement');
        }

        function addRegulatoryRequirement() {
            addListItem('regulatoryRequirementsList', 'regulatory-input', 'Enter regulatory requirement');
        }

        function addListItem(containerId, inputClass, placeholder) {
            const container = document.getElementById(containerId);
            const newItem = document.createElement('div');
            newItem.className = 'list-item';
            newItem.innerHTML = `
                <input type="text" placeholder="${placeholder}" class="${inputClass}">
                <button type="button" class="remove-btn" onclick="removeListItem(this)">Remove</button>
            `;
            container.appendChild(newItem);
        }

        function removeListItem(button) {
            const container = button.parentElement.parentElement;
            if (container.children.length > 1) {
                button.parentElement.remove();
            }
        }

        function getListValues(containerId, inputClass) {
            const container = document.getElementById(containerId);
            const inputs = container.querySelectorAll(`.${inputClass}`);
            return Array.from(inputs).map(input => input.value.trim()).filter(value => value !== '');
        }

        document.getElementById('businessForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const resultContainer = document.getElementById('resultContainer');

            // Show loading
            submitBtn.disabled = true;
            loading.style.display = 'block';
            resultContainer.style.display = 'none';

            // Collect form data
            const formData = {
                business_name: document.getElementById('businessName').value,
                business_type: document.getElementById('businessType').value,
                location: document.getElementById('location').value,
                description: document.getElementById('description').value,
                target_market: document.getElementById('targetMarket').value,
                competitors: getListValues('competitorsList', 'competitor-input'),
                growth_goals: getListValues('growthGoalsList', 'goal-input'),
                initial_investment: document.getElementById('initialInvestment').value ? parseFloat(document.getElementById('initialInvestment').value) : null,
                team_size: document.getElementById('teamSize').value ? parseInt(document.getElementById('teamSize').value) : null,
                unique_value_proposition: document.getElementById('uniqueValueProposition').value || null,
                business_model: document.getElementById('businessModel').value || null,
                industry: document.getElementById('industry').value || null,
                market_size: document.getElementById('marketSize').value || null,
                technology_requirements: getListValues('techRequirementsList', 'tech-input'),
                regulatory_requirements: getListValues('regulatoryRequirementsList', 'regulatory-input')
            };

            try {
                const response = await fetch('http://localhost:5099/process-business', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const result = await response.json();
                    displayResults(result);
                    resultContainer.style.display = 'block';
                } else {
                    const errorText = await response.text();
                    throw new Error(`HTTP ${response.status}: ${errorText}`);
                }
            } catch (error) {
                console.error('Error:', error);
                const resultContent = document.getElementById('resultContent');
                resultContent.innerHTML = `<div class="error">Error: ${error.message}</div>`;
                resultContainer.style.display = 'block';
            } finally {
                // Hide loading
                submitBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        function displayResults(result) {
            const resultContent = document.getElementById('resultContent');
            
            let html = `
                <div class="success">
                    <h4>âœ… Analysis Completed Successfully!</h4>
                    <p><strong>Business:</strong> ${result.business_name}</p>
                    <p><strong>Timestamp:</strong> ${new Date(result.timestamp).toLocaleString()}</p>
                </div>
                
                <div style="margin-top: 20px;">
                    <h4>ðŸ“Š Analysis Summary</h4>
                    <p><strong>Strategic Plan:</strong> ${result.strategic_plan?.competitive_positioning?.unique_value_proposition || 'N/A'}</p>
                    <p><strong>Success Probability:</strong> ${result.analytics_summary?.success_probability?.overall_success_rate || 'N/A'}</p>
                    <p><strong>Key Recommendations:</strong> ${result.overall_recommendations?.length || 0} recommendations generated</p>
                </div>
                
                <div style="margin-top: 20px;">
                    <h4>ðŸ’¡ Top Recommendations</h4>
                    <ul>
            `;
            
            const recommendations = result.overall_recommendations || [];
            recommendations.slice(0, 5).forEach(rec => {
                html += `<li>${rec}</li>`;
            });
            
            html += `
                    </ul>
                </div>
                
                <div style="margin-top: 20px;">
                    <p><em>Full analysis data is available in the API response. You can access detailed reports for each aspect (Strategic, Financial, Creative, Sales, SWOT, Business Model Canvas, Analytics) from the individual agent endpoints.</em></p>
                </div>
            `;
            
            resultContent.innerHTML = html;
        }
    </script>
</body>
</html> 